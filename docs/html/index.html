<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PERRETINA: recepción y transmisión de infrarrojos: SDG2 - Hernán García Quijano &amp; Ángel Rodrigo Pérez Iglesias</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="IMG-5246.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">PERRETINA: recepción y transmisión de infrarrojos<span id="projectnumber">&#160;MEJORAS</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SDG2 - Hernán García Quijano &amp; Ángel Rodrigo Pérez Iglesias </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> Este es nuestro proyecto <b>PERRETINA</b> del curso 2022-2023 de la asignatura de Sistemas Digitales II.</p>
<p><img src="https://lh3.googleusercontent.com/pw/AJFCJaUbV2pstc6I94YPashC6WMACJv6riVmZPGBhgOmsZkg-Q3ZTyrHig7mV8MMm2iA64zkd7gukXwXcRu61Zlos5oNgVyw5kYUJIXUIgpTTvmKvhpFYWw=w2400" alt="foto1" class="inline"/></p>
<p><img src="https://lh3.googleusercontent.com/om7DVhZdZ-7e99xcDsF9r3ANLxoo6NIUjGKY47pwj1_91O13wr4oSGkRlyJsz0HMTB35HjiEwBCth1SthKdRYjdKkr4E0eStNAxGgt4_Z5w6gPsqM7RRsMwpTHlJyOMEeCjt883WbQ=w2400" alt="foto2" class="inline"/></p>
<p>Este proyecto consigue transmitir y recibir tramas NEC con distintos comandos para cumplir diversas funcionalidades. El objetivo principal del proyecto es la transmisión y recepción de tramas NEC que muestren distintos colores RGB. En nuestro caso, mediante los conocimientos adquiridos a lo largo de la asignatura, hemos añadido las siguientes mejoras:</p><ul>
<li>Implementación de un buzzer que funciona mediante ondas PWM, al igual que el transmisor.</li>
<li>Instalación de un fotorresistor para utilizarlo como un detector de luz. Cuando detecta que hay poca luz entra en el estado de emergencia.</li>
<li>El núcleo va alimentado por una batería portátil de 5V y 2A.</li>
</ul>
<p>Estas mejoras han sido añadidas con el objetivo de convertir el proyecto en algo más funcional que una placa a la que se le manden comandos. Hemos querido darle un sentido y hemos construido un arnés de perro que se controla mediante un mando de comandos infrarrojos. Las características del sistema han hecho que nos centremos exclusivamente en el modo de recepción de tramas NEC:</p><ul>
<li>Al igual que en el proyecto inicial, el LED RGB del sistema es capaz de emitir 8 colores RGB distintos en función del comando que se le mande (rojo, verde, azul, cyan, magenta, amarillo, blanco y negro/apagado).</li>
<li>Cuando se pulsa el botón FADE del mando, el buzzer emite una melodía de duración aproximada de 1 minuto.</li>
<li>Si se detecta que hay poca luz el dispositivo entrará en estado de emergencia, es decir, el buzzer emitirá un "DO" y el LED se quedará en el color blanco mientras dure la emergencia. En el momento que se vuelva a detectar una luz normal, el buzzer emitirá un "RE" y el LED una luz verde, indicando que ya está todo bien. Acto seguido se podrá volver a cambiar de color.</li>
<li>Todo ello montado sobre un arnés con una batería externa que convierte nuestro proyecto en un sistema digital inalámbrico, que hace cobrar sentido práctico a los modos de bajo consumo añadimos en la última versión.</li>
</ul>
<p>Para añadir estas mejoras, hemos tenido que modificar la máquina de estados principal: fsm_retina, y añadir una nueva máquina de estados para el fotorresistor:</p>
<p><b>Nuevo diagrama de estados del sistema RETINA:</b> <img src="https://lh3.googleusercontent.com/Udi3_ZkyR1Do30hfkRrFtgCCvuD7rsJQtpDQaoGvN5AN8MvmftYa4FdO4cskREJ11nS1wv4IoJsxC2JnR6CjBWy483swtLkRj_DAgUl2QtJeagxNfd5O1-qoHiDPlNuMID26EpKy8w=w2400" alt="fsm_retina" class="inline"/></p>
<p><b>Diagrama de estados del sensor de luz:</b> <img src="https://lh3.googleusercontent.com/yADnEf5m1xdEqufH7lk8JDDNgubMZ1FMDYopBoOQzBhpLYbEQaMIRCb9F3_qxf0K3s1OYS9aDWtHqzv5eG7tM0KUZrLGMs5p1nMh-D8NgLnkFWe8ET00m6Gs0_BMtG4BCoGML0_FRA=w2400" alt="fsm_sensor" class="inline"/></p>
<p>Puedes acceder al vídeo del demostrador del proyecto pinchando en la imagen:</p>
<p><a href="https://youtu.be/M0baAnunEMg" title="Demostrador del proyecto Retina."><img src="https://lh3.googleusercontent.com/UJ2BvT0R7w5Xqt0GvD2Z_x5curXcVZWYF7HjGHMAfaNtyc13NI0AmlLntinOBD3QDuwAGtM5R9_eIPlE8auZQCsKyoC4AW7WBYbXS1g_OmgJzTPchmwzVB1Bi0L1Rx1fw7MrdlhOWw=w2400" alt="Demostrador del proyecto Retina" class="inline"/></a></p>
<p>Se adjunta también una captura en el osciloscopio del laboratorio de las tramas NEC transmitidas y detectadas por el sistema RETINA: <img src="https://lh3.googleusercontent.com/1y_RJ5e2mZAhHGmtKUDfxnjf7rosQYfcqTePLckxYoT-EMMoUiwKPe_UEizy6JbRhT16V4paQ9FMTEfEqcksWH4PLYCwA0J5xHdzh2J9J1hXSa4Iv5CHAqZ9VsRynUydppO1DYEw3w=w2400" alt="Captura en el osciloscopio de las tramas NEC transmitidas y detectadas" class="inline"/></p>
<p><b>Lista de materiales:</b></p><ul>
<li>Nucleo-STM32F446RE - 1 BASE L1, L2, L3</li>
<li>Cable USB. A Macho-B Mini Importante: cable de alimentación y datos</li>
<li>Latiguillos macho-macho (Cables de conexión para protoboard)</li>
<li>Latiguillos macho-hembra (Cables de conexión para protoboard)</li>
<li>Protoboard Tamaño mínimo: 80x60 mm</li>
<li>Diodo emisor infrarrojos De inserción. (Encapsulado 5 mm. Longitud de onda central: ∼ 940 − 050 nm. Potencia max: 40 mW e.g.: 17◦ visión)</li>
<li>MOSFET puerta tipo N (Empaquetado: TO-92. Tensión max D-S: 40 − 60 V . Corriente max: ∼ 0,5 A)</li>
<li>Resistencia 33 Ω (De inserción. Tolerancia: ≤ 10 %. Potencia: 1/4 − 1/2 W)</li>
<li>LED RGB cátodo común (De inserción. e.g 60º visión)</li>
<li>Receptor de infrarrojos (frecuencia portadora 38kHz. Longitud de onda central: 950nm)</li>
<li>Resistencia 150 Ω (De inserción. Tolerancia: ≤ 10 %. Potencia: 1/4 − 1/2 W)</li>
<li>Resistencia 91 Ω (De inserción. Tolerancia: ≤ 10 %. Potencia: 1/4 − 1/2 W) x2</li>
<li>Dispositivo Buzzer</li>
<li>Fotorresistor</li>
<li>Batería portátil (5V, 2A)</li>
<li>Resistencia 10 kΩ (De inserción. Tolerancia: ≤ 10 %. Potencia: 1/4 − 1/2 W)</li>
<li>Carcasa de plástico para el montaje.</li>
<li>Arnés de perro pequeño</li>
</ul>
<p><em>Ningún animal ha sido herido en la realización de este proyecto.</em> <img src="https://lh3.googleusercontent.com/I0k8DUN_ZrI97RdYnjAMDkVELGWVhXaVzxooNWD94KIW9IT8RN0AWRB-J3dDQY4qkLverdWfDn0u_MMyH-d8g9w6XUJjTdA1W-Wm7f-agYLux1-iDf7UV_VWKLB9gEVWWH6S-fLOpQ=w2400" alt="PERRETINA" class="inline"/></p>
<p><b>Información de contacto:</b></p>
<p><b>Hernán García Quijano:</b> <a href="#" onclick="location.href='mai'+'lto:'+'her'+'na'+'n.g'+'ar'+'cia'+'.q'+'uij'+'an'+'o@a'+'lu'+'mno'+'s.'+'upm'+'.e'+'s'; return false;">herna<span class="obfuscator">.nosp@m.</span>n.ga<span class="obfuscator">.nosp@m.</span>rcia.<span class="obfuscator">.nosp@m.</span>quij<span class="obfuscator">.nosp@m.</span>ano@a<span class="obfuscator">.nosp@m.</span>lumn<span class="obfuscator">.nosp@m.</span>os.up<span class="obfuscator">.nosp@m.</span>m.es</a></p>
<p><b>Ángel Rodrigo Pérez Iglesias:</b> <a href="#" onclick="location.href='mai'+'lto:'+'ang'+'el'+'rod'+'ri'+'go.'+'pe'+'rez'+'@a'+'lum'+'no'+'s.u'+'pm'+'.es'; return false;">angel<span class="obfuscator">.nosp@m.</span>rodr<span class="obfuscator">.nosp@m.</span>igo.p<span class="obfuscator">.nosp@m.</span>erez<span class="obfuscator">.nosp@m.</span>@alum<span class="obfuscator">.nosp@m.</span>nos.<span class="obfuscator">.nosp@m.</span>upm.e<span class="obfuscator">.nosp@m.</span>s</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
